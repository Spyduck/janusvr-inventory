<?phprequire('vendor/autoload.php');header("Content-Type: json");use Cloutier\PhpIpfsApi\IPFS;$ipfs = new IPFS("localhost", "8080", "5001");if (isset($_POST["json"])){	if (!isJson($_POST["json"]))	{		echo json_encode(array('error' => 'INVALID_DATA'));	}	elseif ($_POST["json"] == '')	{		echo json_encode(array('error' => 'INVALID_DATA'));	}	else	{		if (isJson($_POST["json"]))		{			$jsondata = json_decode($_POST["json"]);						if (array_key_exists("hash",$jsondata))			{				$hash = $jsondata->hash;				if ($hash == 'undefined' || $hash == '' || $hash == 'null' || $hash == null)				{					echo json_encode(array('error' => 'INVALID_HASH'));				}				else				{					// uncomment to write to disk instead					//file_put_contents('../data/json/'.$hash.'.json', json_encode($jsondata));					$hash = $ipfs->add(json_encode($jsondata));					echo json_encode(array('hash' => $hash));				}			}			else			{				echo json_encode(array('error' => 'INVALID_DATA'));			}		}		else		{			echo json_encode(array('error' => 'INVALID_DATA'));		}	}}else{	echo json_encode(array('error' => 'INVALID_DATA'));}function isJson($string){	json_decode($string);	return (json_last_error() == JSON_ERROR_NONE);}?>